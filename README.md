# Teaching of Geography · 地理课堂教学工具

基于 Three.js + React + Vite 的交互式地球课堂演示工具，用于**地理课堂教学 / 学生自主探索 / 课后复习**。

- 真实三维地球（贴图 + 国界线），支持旋转 / 缩放 / 点击选点
- 课堂模式：自由探索 / 板块构造 / 世界气候 / 人文地理
- 任务系统：每节课 6 条任务，自动判定完成并加分，带奖励弹窗
- AI 讲解：按课程主题和“简要 / 详细”两档生成课堂讲解
- 课堂笔记：收藏当前讲解，一键回放并自动转到对应地点
- 手势控制：单手挥动控制旋转，张开 / 握拳控制缩放

---
## 项目介绍：实用性 · 创意性 · 技术深度

本项目是一款面向中学 / 大学地理课堂的互动教学工具，围绕“老师好用、学生好玩”进行设计。

**实用性方面**：  
项目把三维地球、课程模式、课堂任务、AI 讲解和课堂笔记整合到一个界面中。老师可以按“自由探索 / 板块构造 / 世界气候 / 人文地理”等模式备课和上课，系统自动生成与当前主题匹配的任务与积分反馈，并支持一键收藏与回放重点区域，适合课堂演示、学生自主探索和课后复习多种场景。

**创意性方面**：  
项目把 *大模型 + 3D 地球 + 任务系统 + 手势控制* 组合在一起：学生不仅可以通过点击地球获取与课程主题相关的 AI 讲解，还能在任务驱动下完成“找位置”“判断气候 /地貌”等练习，获得积分奖励；在设备支持的情况下，还可以用单手挥动和张合来旋转、缩放地球，把原本抽象的地理知识变成可操作、可游戏化的课堂活动。

**技术深度方面**：  
底层基于 React + TypeScript + Three.js 自行实现三维地球渲染与交互，包括高分辨率贴图的加载与降级策略、经纬度与三维坐标的双向映射、国家边界 GeoJSON 的射线检测与高亮、任务与收藏驱动的视角平滑定位、以及对大模型接口的缓存和按“课程模式 + 讲解深度”动态生成 Prompt 的机制。手势部分结合 MediaPipe 手部识别，对关键点数据做了二次处理，将其平滑映射为旋转与缩放控制，兼顾了交互的可玩性与课堂场景下的稳定性。
本项目由阿里云ESA提供加速、计算和保护”以及附右图➡️![Uploading image.png…]()


## 一、快速体验

### 本地运行（推荐）

```bash
# 克隆仓库
git clone git@github.com:andic1/Teaching-of-Geography.git
cd Teaching-of-Geography

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

终端会输出本地访问地址，例如：

```text
Local:   http://localhost:5173/
Network: http://192.168.xx.xx:5173/
```

浏览器打开地址即可进入**启动页**。

> 首次进入建议老师先点击「查看操作指引」，用 1 分钟向学生说明基本操作。

### 生产构建

```bash
npm run build
npm run preview   # 可选，本地预览打包结果
```

打包产物位于 `dist/` 目录，可部署到任意静态站点服务（GitHub Pages / Vercel / Netlify 等）。

---

## 二、课堂使用流程

### 1. 启动与基础操作

- **拖动地球**：按住鼠标左键在地球上拖动，旋转视角。
- **滚轮缩放**：滚轮向前拉近、向后推远镜头。
- **点击选点**：在地球表面任意位置单击，系统会锁定该点经纬度并生成一条“课堂讲解”。

### 2. 选择课程模式

左上角可切换 4 种模式：

- 自由探索
- 板块构造课
- 世界气候课
- 人文地理课

不同模式会影响：

- AI 讲解的角度与侧重点
- 右侧“课堂任务”列表的题目内容

### 3. 讲解深度：简要 / 详细

左上“讲解深度”支持两档：

- **简要**：适合低年级或快速浏览，用于课堂导入 / 热身
- **详细**：适合高年级或复习巩固，包含更多背景信息

AI 讲解在生成前会根据当前模式与深度调节 Prompt，保证内容贴合教学目标。

### 4. 课堂任务与积分

右侧“课堂任务”面板：

- 每节课自动抽取 6 条任务
- 当前任务在列表中高亮
- 学生根据提示在地球上选点，系统自动判断是否达成
- 完成任务会：
  - 标记为已完成 ✓
  - 弹出奖励弹窗
  - 增加总积分

老师可以：

1. 先让学生阅读任务描述
2. 组织学生讨论应点击的区域
3. 由一名学生上台操作地球
4. 用奖励分数提升课堂参与度

### 5. 课堂笔记与回放

左下方“课堂讲解”卡片右上有 **收藏** 按钮：

- 点击后会将 **地点 + 讲解内容 + 所属课程 + 时间戳** 保存为一条课堂笔记
- 右侧“课堂笔记”列表中点击任一条：
  - 地球会自动平滑旋转到对应位置
  - 左下卡片回放当时的讲解

适用场景：

- 老师课前准备“重点区域清单”，按顺序回放讲解
- 复习课上快速回顾重要案例（火山带、季风区、人口密集区等）

### 6. 手势控制

右下角“手势控制”面板显示为 **在线** 时，可启用手势：

- 将一只手放入摄像头画面中心
- 左右挥动手掌：地球左右旋转
- 上下挥动：微调俯仰角度
- 在手基本不移动时，缓慢张开 / 握拳：控制缩放

> 如果教室设备条件有限（无摄像头或带宽不足），所有操作均可只用鼠标完成。

---

## 三、技术栈

- **前端框架**：React + TypeScript + Vite
- **3D 渲染**：Three.js（自定义球体、纹理、网格与交互射线检测）
- **样式**：Tailwind CSS，自定义浅色教学主题
- **AI 接口**：兼容 OpenAI 风格的 Chat Completions API（示例中使用 Qwen 模型）

项目结构简要：

- `App.tsx`：应用入口，管理教学模式 / 任务 / 讲解 / 收藏等状态
- `components/HoloEarth.tsx`：Three.js 地球渲染与交互
- `components/HoloUI.tsx`：顶部课程选择、任务面板、讲解卡片、收藏列表
- `components/HandPanel.tsx`：摄像头 + MediaPipe 手势识别
- `services/geminiService.ts`：AI 接口封装与缓存

---




